{% extends "base.html" %}
{% load static %}

{% block title %}Iniciar SesiÃ³n - Sistema Agrointeligente{% endblock %}

{% block extra_css %}
<!-- Estilo propio para formularios de autenticaciÃ³n -->
<link rel="stylesheet" href="{% static 'css/auth.css' %}">
{% endblock %}

{% block content %}
<div class="auth-container">
  <div class="auth-card">
    <h2 class="auth-title">Bienvenido al Sistema ADSO ğŸŒ¿</h2>
    <p class="auth-subtitle">Por favor ingresa tus credenciales</p>

    <!-- Formulario de login -->
    <form method="post" class="auth-form">
      {% csrf_token %}

      {% if form.errors %}
      <div class="alert alert-error">
        Usuario o contraseÃ±a incorrectos.
      </div>
      {% endif %}

      <!-- Campo usuario/email -->
      <div class="form-group">
        <label for="id_username">Correo ElectrÃ³nico</label>
        <input type="email" name="username" id="id_username" placeholder="usuario@sena.edu.co" required>
      </div>

      <!-- Campo contraseÃ±a con botÃ³n para mostrar/ocultar -->
      <div class="form-group">
        <label for="id_password">ContraseÃ±a</label>
        <div class="password-input">
          <input type="password" name="password" id="id_password" placeholder="********" required>
          <button type="button" class="toggle-password">ğŸ‘ï¸</button>
        </div>
        <!-- Enlace para recuperaciÃ³n de contraseÃ±a -->
        <a href="{% url 'password_reset' %}" class="forgot-password">Â¿Olvidaste tu contraseÃ±a?</a>
      </div>

      <!-- BotÃ³n principal -->
      <button type="submit" class="btn btn-primary btn-block">Iniciar SesiÃ³n</button>
    </form>

    <!-- Enlace a la vista de registro -->
    <div class="auth-footer">
      Â¿No tienes cuenta? <a href="{% url 'registro' %}">RegÃ­strate aquÃ­</a>
    </div>
  </div>
</div>
{% endblock %}

{% block javascript %}
<!-- Script para alternar visibilidad de la contraseÃ±a -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const toggleBtn = document.querySelector('.toggle-password');
    const passwordInput = document.getElementById('id_password');

    if (toggleBtn && passwordInput) {
      toggleBtn.addEventListener('click', function () {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        this.textContent = type === 'password' ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸';
      });
    }
  });
</script>
{% endblock %}
